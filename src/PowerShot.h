#ifndef __AKI_POWERSHOT_H__
#define __AKI_POWERSHOT_H__

namespace Shot
{
	//////////////////////////////////
	// 強いショット
	//////////////////////////////////
	class CPower : public CBase
	{
	public:	// 外部公開

		//////////////////////////////////
		// 定数
		//////////////////////////////////
		CONSTANT float	SPEED;			// 移動速度
		CONSTANT LPSTR	SHOT_MESH_PASS;	// 弾のメッシュパス
		
		//////////////////////////////////
		// メソッド
		//////////////////////////////////
		
		// コンストラクタ
		CPower();
		CPower( const D3DXMATRIX* mat );

		// デストラクタ
		~CPower();

		//////////////////////////////////////////////////
		//	・関数名	Update
		//	・説明		更新を行う
		//	・引数		なし
		//	・戻り値	なし
		//////////////////////////////////////////////////
		void Update();

		//////////////////////////////////////////////////
		//	・関数名	Draw
		//	・説明		描画を行う
		//	・引数		
		//		- lpDevice	デバイス
		//	・戻り値	なし
		//////////////////////////////////////////////////
		void Draw( const LPDIRECT3DDEVICE9 lpdevice );

		//////////////////////////////////////////////////
		//	・関数名	GetPos
		//	・説明		現在の位置情報を獲得
		//	・引数		なし
		//	・戻り値	現在の位置状態を返す
		//////////////////////////////////////////////////
		inline D3DXVECTOR3 GetPos() const
		{
			return m_mMat.GetPos() - m_lpMesh->GetCenter();
		}

		//////////////////////////////////////////////////
		//	・関数名	GetRadius
		//	・説明		メッシュの半径を獲得
		//	・引数		なし
		//	・戻り値	メッシュの半径を返す
		//////////////////////////////////////////////////
		inline float GetRadius() const
		{
			return m_lpMesh->GetRadius();
		}

		//////////////////////////////////////////////////
		//	・関数名	Dispatch
		//	・説明		送られてきたオブジェクトに自分を送りつける
		//	・引数		
		//		- object	行動を起こして欲しいオブジェクト
		//	・戻り値	なし
		//////////////////////////////////////////////////
		void Dispatch( IDoubleDispatch* object )
		{
			object->Action( *this );
		}

		//////////////////////////////////////////////////
		//	・関数名	Action
		//	・説明		敵に対する行動(Dispatchからのみ呼ばれる)
		//	・引数		
		//		- object	行動を起こす対象のオブジェクト
		//	・戻り値	なし
		//////////////////////////////////////////////////
		void Action( Enemy::CBase& object );

	private:	// 非公開

		//////////////////////////////////////////////////
		// フィールド
		//////////////////////////////////////////////////
		DWORD	m_StartTime;	// 始まった時間
		CXfile*	m_lpMesh;		// メッシュデータ
	};
}

#endif // __AKI_POWERSHOT_H__